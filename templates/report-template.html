<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Website Audit Report — {{URL}}</title>
  <style>
{{REPORT_CSS}}
  </style>
</head>
<body>
  <!-- Global SVG Definitions -->
  <svg width="0" height="0" style="position: absolute">
    <defs>
      <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color: #ef4444; stop-opacity: 1" />
        <stop offset="50%" style="stop-color: #fbbf24; stop-opacity: 1" />
        <stop offset="100%" style="stop-color: #16a34a; stop-opacity: 1" />
      </linearGradient>
    </defs>
  </svg>

  <!-- ===== HEADER ===== -->
  <div class="report-header">
    <div class="header-top">
      <div class="logo-tre">
        <span class="tre-t">T</span>
        <span class="tre-r">R</span>
        <span class="tre-e-bottom">E</span>
      </div>
      <div class="lang-toggle">
        <button class="lang-btn active" data-lang="no" onclick="switchLang('no')">
          <span class="flag">&#127475;&#127476;</span> NO
        </button>
        <button class="lang-btn" data-lang="en" onclick="switchLang('en')">
          <span class="flag">&#127468;&#127463;</span> EN
        </button>
      </div>
    </div>
  </div>
  <div class="audit-meta">
    <a href="{{URL}}" class="audit-url">{{URL}}</a>
    <span class="audit-date" data-no="Revisjonsdato: {{DATE}}" data-en="Audit date: {{DATE}}">Revisjonsdato: {{DATE}}</span>
  </div>

  <div class="container">

    <!-- ===== EXECUTIVE SUMMARY ===== -->
    <section id="summary">
      <h2 data-no="Sammendrag" data-en="Executive Summary">Sammendrag</h2>
      <p>{{EXECUTIVE_SUMMARY_TEXT}}</p>

      <!-- Domain score cards (peach bg, lime accent, dark text) -->
      <div class="domain-summary">
        <div class="domain-card">
          <div class="domain-name">UX</div>
          <div class="ring-container">
            <svg class="domain-ring-svg" viewBox="0 0 100 100">
              <circle class="domain-ring-bg" cx="50" cy="50" r="42" />
              <!-- circumference = 2π×42 ≈ 263.9; dashoffset = 263.9 - (score/100 × 263.9) -->
              <circle class="domain-ring-fill" cx="50" cy="50" r="42"
                      stroke-dasharray="263.9" stroke-dashoffset="{{UX_RING_OFFSET}}" />
            </svg>
            <div class="domain-score">{{UX_SCORE}}%</div>
          </div>
          <div class="domain-counts">
            <a class="count-badge" href="#ux"><span class="count-dot pass"></span> {{UX_PASS}} <span data-no="bestått" data-en="pass">bestått</span></a>
            <a class="count-badge filter-link" href="#ux" data-filter="warn"><span class="count-dot warn"></span> {{UX_WARN}} <span data-no="advarsel" data-en="warn">advarsel</span></a>
            <a class="count-badge filter-link" href="#ux" data-filter="fail"><span class="count-dot fail"></span> {{UX_FAIL}} <span data-no="feil" data-en="fail">feil</span></a>
          </div>
        </div>
        <div class="domain-card">
          <div class="domain-name">UI</div>
          <div class="ring-container">
            <svg class="domain-ring-svg" viewBox="0 0 100 100">
              <circle class="domain-ring-bg" cx="50" cy="50" r="42" />
              <circle class="domain-ring-fill" cx="50" cy="50" r="42"
                      stroke-dasharray="263.9" stroke-dashoffset="{{UI_RING_OFFSET}}" />
            </svg>
            <div class="domain-score">{{UI_SCORE}}%</div>
          </div>
          <div class="domain-counts">
            <a class="count-badge" href="#ui"><span class="count-dot pass"></span> {{UI_PASS}} <span data-no="bestått" data-en="pass">bestått</span></a>
            <a class="count-badge filter-link" href="#ui" data-filter="warn"><span class="count-dot warn"></span> {{UI_WARN}} <span data-no="advarsel" data-en="warn">advarsel</span></a>
            <a class="count-badge filter-link" href="#ui" data-filter="fail"><span class="count-dot fail"></span> {{UI_FAIL}} <span data-no="feil" data-en="fail">feil</span></a>
          </div>
        </div>
        <div class="domain-card">
          <div class="domain-name" data-no="Tilgjengelighet" data-en="Accessibility">Tilgjengelighet</div>
          <div class="ring-container">
            <svg class="domain-ring-svg" viewBox="0 0 100 100">
              <circle class="domain-ring-bg" cx="50" cy="50" r="42" />
              <circle class="domain-ring-fill" cx="50" cy="50" r="42"
                      stroke-dasharray="263.9" stroke-dashoffset="{{A11Y_RING_OFFSET}}" />
            </svg>
            <div class="domain-score">{{A11Y_SCORE}}%</div>
          </div>
          <div class="domain-counts">
            <a class="count-badge" href="#accessibility"><span class="count-dot pass"></span> {{A11Y_PASS}} <span data-no="bestått" data-en="pass">bestått</span></a>
            <a class="count-badge filter-link" href="#accessibility" data-filter="warn"><span class="count-dot warn"></span> {{A11Y_WARN}} <span data-no="advarsel" data-en="warn">advarsel</span></a>
            <a class="count-badge filter-link" href="#accessibility" data-filter="fail"><span class="count-dot fail"></span> {{A11Y_FAIL}} <span data-no="feil" data-en="fail">feil</span></a>
          </div>
        </div>
        <div class="domain-card">
          <div class="domain-name" data-no="Beste praksis" data-en="Best Practices">Beste praksis</div>
          <div class="ring-container">
            <svg class="domain-ring-svg" viewBox="0 0 100 100">
              <circle class="domain-ring-bg" cx="50" cy="50" r="42" />
              <circle class="domain-ring-fill" cx="50" cy="50" r="42"
                      stroke-dasharray="263.9" stroke-dashoffset="{{BP_RING_OFFSET}}" />
            </svg>
            <div class="domain-score">{{BP_SCORE}}%</div>
          </div>
          <div class="domain-counts">
            <a class="count-badge" href="#best-practices"><span class="count-dot pass"></span> {{BP_PASS}} <span data-no="bestått" data-en="pass">bestått</span></a>
            <a class="count-badge filter-link" href="#best-practices" data-filter="warn"><span class="count-dot warn"></span> {{BP_WARN}} <span data-no="advarsel" data-en="warn">advarsel</span></a>
            <a class="count-badge filter-link" href="#best-practices" data-filter="fail"><span class="count-dot fail"></span> {{BP_FAIL}} <span data-no="feil" data-en="fail">feil</span></a>
          </div>
        </div>
      </div>

      <!-- Visual: Stacked bar overview -->
      <div class="stacked-bar-container">
        <h3 data-no="Overordnet oversikt" data-en="Overall Overview">Overordnet oversikt</h3>
        <!-- Generate one stacked bar per domain. Example:
        <p class="stacked-bar-row-label">UX</p>
        <div class="stacked-bar">
          <div class="bar-segment bar-pass" style="width:{{UX_PASS_PCT}}%">{{UX_PASS}}</div>
          <div class="bar-segment bar-warn" style="width:{{UX_WARN_PCT}}%">{{UX_WARN}}</div>
          <div class="bar-segment bar-fail" style="width:{{UX_FAIL_PCT}}%">{{UX_FAIL}}</div>
        </div>
        Repeat for UI, Accessibility, Best Practices -->
        <!-- {{STACKED_BARS}} -->
        <div class="stacked-bar-legend">
          <span><span class="legend-dot" style="background:var(--color-pass)"></span> <span data-no="Bestått" data-en="Pass">Bestått</span></span>
          <span><span class="legend-dot" style="background:var(--color-warn)"></span> <span data-no="Advarsel" data-en="Warning">Advarsel</span></span>
          <span><span class="legend-dot" style="background:var(--color-fail)"></span> <span data-no="Feil" data-en="Fail">Feil</span></span>
          <span><span class="legend-dot" style="background:var(--color-gray-300)"></span> <span data-no="Ikke aktuelt" data-en="N/A">Ikke aktuelt</span></span>
        </div>
      </div>
    </section>

    <!-- ===== LIGHTHOUSE RESULTS ===== -->
    <section id="lighthouse">
      <h2 data-no="Lighthouse-resultater" data-en="Lighthouse Results">Lighthouse-resultater</h2>

      <!-- Device toggle: Desktop / Mobile -->
      <div class="device-toggle">
        <button class="device-btn active" data-device="desktop" onclick="switchDevice('desktop')">Desktop</button>
        <button class="device-btn" data-device="mobile" onclick="switchDevice('mobile')">Mobil</button>
      </div>

      <!-- Speedometer gauges for Lighthouse scores.
           For each gauge:
           - Arc spans 180° (semicircle), from left (0) to right (100)
           - Arc path: M 15 85 A 65 65 0 0 1 145 85  (center at 80,85, radius 65)
           - Arc circumference (half circle) = π × 65 ≈ 204.2
           - stroke-dasharray="204.2"
           - stroke-dashoffset = 204.2 - (score/100 × 204.2)
           - Needle rotation: -90deg + (score/100 × 180)deg
           - Color class: good (90-100), needs-improvement (50-89), poor (0-49)
      -->

      <!-- ===== DESKTOP GAUGES ===== -->
      <div class="device-section active" id="device-desktop">
        <div class="score-grid">
          <div class="gauge-card">
            <div class="label" data-no="Ytelse" data-en="Performance">Ytelse</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{PERF_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{PERF_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{PERF_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{PERF_SCORE}}</text>
            </svg>
            <div class="rating">{{PERF_RATING}}</div>
          </div>
          <div class="gauge-card">
            <div class="label" data-no="Tilgjengelighet" data-en="Accessibility">Tilgjengelighet</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{A11Y_LH_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{A11Y_LH_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{A11Y_LH_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{A11Y_LH_SCORE}}</text>
            </svg>
            <div class="rating">{{A11Y_LH_RATING}}</div>
          </div>
          <div class="gauge-card">
            <div class="label" data-no="Beste praksis" data-en="Best Practices">Beste praksis</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{BP_LH_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{BP_LH_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{BP_LH_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{BP_LH_SCORE}}</text>
            </svg>
            <div class="rating">{{BP_LH_RATING}}</div>
          </div>
          <div class="gauge-card">
            <div class="label">SEO</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{SEO_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{SEO_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{SEO_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{SEO_SCORE}}</text>
            </svg>
            <div class="rating">{{SEO_RATING}}</div>
          </div>
        </div>
      </div>

      <!-- ===== MOBILE GAUGES ===== -->
      <div class="device-section" id="device-mobile">
        <div class="score-grid">
          <div class="gauge-card">
            <div class="label" data-no="Ytelse" data-en="Performance">Ytelse</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{M_PERF_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{M_PERF_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{M_PERF_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{M_PERF_SCORE}}</text>
            </svg>
            <div class="rating">{{M_PERF_RATING}}</div>
          </div>
          <div class="gauge-card">
            <div class="label" data-no="Tilgjengelighet" data-en="Accessibility">Tilgjengelighet</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{M_A11Y_LH_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{M_A11Y_LH_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{M_A11Y_LH_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{M_A11Y_LH_SCORE}}</text>
            </svg>
            <div class="rating">{{M_A11Y_LH_RATING}}</div>
          </div>
          <div class="gauge-card">
            <div class="label" data-no="Beste praksis" data-en="Best Practices">Beste praksis</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{M_BP_LH_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{M_BP_LH_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{M_BP_LH_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{M_BP_LH_SCORE}}</text>
            </svg>
            <div class="rating">{{M_BP_LH_RATING}}</div>
          </div>
          <div class="gauge-card">
            <div class="label">SEO</div>
            <svg class="gauge-svg" viewBox="0 0 160 110">
              <path class="gauge-bg" d="M 15 85 A 65 65 0 0 1 145 85" />
              <path class="gauge-fill {{M_SEO_GAUGE_CLASS}}" d="M 15 85 A 65 65 0 0 1 145 85"
                    stroke-dasharray="204.2" stroke-dashoffset="{{M_SEO_DASH_OFFSET}}" />
              <text class="gauge-tick-label" x="12" y="100">0</text>
              <text class="gauge-tick-label" x="80" y="14">50</text>
              <text class="gauge-tick-label" x="148" y="100">100</text>
              <polygon class="gauge-needle" points="78,85 82,85 80,25" style="transform: rotate({{M_SEO_NEEDLE_DEG}}deg)" />
              <circle class="gauge-center-dot" cx="80" cy="85" r="5" />
              <text class="gauge-value" x="80" y="80">{{M_SEO_SCORE}}</text>
            </svg>
            <div class="rating">{{M_SEO_RATING}}</div>
          </div>
        </div>
      </div>

      <h3 data-no="Nøkkelmetrikker" data-en="Key Metrics">Nøkkelmetrikker</h3>

      <!-- Visual bar chart for metrics.
        IMPORTANT: Always use full metric names so non-technical readers understand them.
        For each metric, generate:
        <div class="metric-bar-row">
          <div class="metric-bar-label">FCP (First Contentful Paint)</div>
          <div class="metric-bar-track">
            <div class="metric-bar-fill good" style="width:{{FCP_BAR_PCT}}%">{{FCP_VALUE}}</div>
          </div>
        </div>
        Use these full names:
        - FCP = First Contentful Paint
        - LCP = Largest Contentful Paint
        - TBT = Total Blocking Time
        - CLS = Cumulative Layout Shift
        - SI  = Speed Index
        Classes for fill: good, needs-improvement, poor -->
      <div class="metric-bar-chart">
        <!-- {{METRIC_BARS}} -->
      </div>

      <h3 data-no="Feilende kontroller" data-en="Failing Audits">Feilende kontroller</h3>
      <table class="findings-table">
        <thead>
          <tr>
            <th data-no="Kontroll" data-en="Audit">Kontroll</th>
            <th data-no="Påvirkning" data-en="Impact">Påvirkning</th>
            <th data-no="Beskrivelse" data-en="Description">Beskrivelse</th>
          </tr>
        </thead>
        <tbody>
          <!-- {{FAILING_AUDITS_ROWS}}
            Structure:
            - Kontroll: Short name of what was tested (e.g. "Bildedimensjoner", "Event listeners")
            - Påvirkning: Impact level (WARN, FAIL)
            - Beskrivelse: Detailed explanation of what needs to be fixed
          -->
        </tbody>
      </table>
    </section>

    <!-- ===== UX FINDINGS ===== -->
    <section id="ux">
      <div class="section-header-lime">
        <h2 data-no="UX-funn" data-en="UX Findings">UX-funn</h2>
      </div>

      <h3 data-no="Navigasjon og informasjonsarkitektur" data-en="Navigation & Information Architecture">Navigasjon og informasjonsarkitektur</h3>
      <table class="findings-table">
        <thead>
          <tr>
            <th data-no="Sjekk" data-en="Check">Sjekk</th>
            <th>Status</th>
            <th data-no="Notater" data-en="Notes">Notater</th>
          </tr>
        </thead>
        <tbody>
          <!-- {{UX_NAV_ROWS}}
            Use this pattern for expandable rows (WARN/FAIL with extra details):
            <tr class="finding-row" onclick="toggleDetail(this)">
              <td><span class="expand-icon"></span> Check name</td>
              <td><span class="status warn">WARN</span></td>
              <td class="notes">Brief note</td>
            </tr>
            <tr class="finding-detail">
              <td colspan="3">
                <div class="detail-label" data-no="Detaljer:" data-en="Details:">Detaljer:</div>
                <p>Full explanation...</p>
                <div class="detail-recommendation">
                  <div class="detail-label" data-no="Anbefaling:" data-en="Recommendation:">Anbefaling:</div>
                  <p>How to fix...</p>
                </div>
              </td>
            </tr>

            For PASS rows without extra details (no need to click):
            <tr>
              <td>Check name</td>
              <td><span class="status pass">PASS</span></td>
              <td class="notes">Brief note</td>
            </tr>
          -->
        </tbody>
      </table>

      <h3 data-no="Innhold og lesbarhet" data-en="Content & Readability">Innhold og lesbarhet</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UX_CONTENT_ROWS}} --></tbody>
      </table>

      <h3 data-no="Interaksjonsdesign" data-en="Interaction Design">Interaksjonsdesign</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UX_INTERACTION_ROWS}} --></tbody>
      </table>

      <h3 data-no="Kognitiv belastning" data-en="Cognitive Load">Kognitiv belastning</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UX_COGNITIVE_ROWS}} --></tbody>
      </table>
    </section>

    <!-- ===== UI FINDINGS ===== -->
    <section id="ui">
      <div class="section-header-lime">
        <h2 data-no="UI-funn" data-en="UI Findings">UI-funn</h2>
      </div>

      <h3 data-no="Visuelt hierarki" data-en="Visual Hierarchy">Visuelt hierarki</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UI_HIERARCHY_ROWS}} --></tbody>
      </table>

      <h3 data-no="Typografi" data-en="Typography">Typografi</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UI_TYPOGRAPHY_ROWS}} --></tbody>
      </table>

      <h3 data-no="Farge og kontrast" data-en="Color & Contrast">Farge og kontrast</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UI_COLOR_ROWS}} --></tbody>
      </table>

      <h3 data-no="Avstand og layout" data-en="Spacing & Layout">Avstand og layout</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UI_SPACING_ROWS}} --></tbody>
      </table>

      <h3 data-no="Komponenter" data-en="Components">Komponenter</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{UI_COMPONENTS_ROWS}} --></tbody>
      </table>
    </section>

    <!-- ===== ACCESSIBILITY FINDINGS ===== -->
    <section id="accessibility">
      <div class="section-header-lime">
        <h2 data-no="Tilgjengelighetsfunn" data-en="Accessibility Findings">Tilgjengelighetsfunn</h2>
      </div>

      <h3 data-no="Oppfattbar" data-en="Perceivable">Oppfattbar</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{A11Y_PERCEIVABLE_ROWS}} --></tbody>
      </table>

      <h3 data-no="Betjenbar" data-en="Operable">Betjenbar</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{A11Y_OPERABLE_ROWS}} --></tbody>
      </table>

      <h3 data-no="Forståelig" data-en="Understandable">Forståelig</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{A11Y_UNDERSTANDABLE_ROWS}} --></tbody>
      </table>

      <h3 data-no="Robust" data-en="Robust">Robust</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{A11Y_ROBUST_ROWS}} --></tbody>
      </table>
    </section>

    <!-- ===== BEST PRACTICES FINDINGS ===== -->
    <section id="best-practices">
      <div class="section-header-lime">
        <h2 data-no="Beste praksis-funn" data-en="Best Practices Findings">Beste praksis-funn</h2>
      </div>

      <h3 data-no="Ytelsesindikatorer" data-en="Performance Indicators">Ytelsesindikatorer</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{BP_PERFORMANCE_ROWS}} --></tbody>
      </table>

      <h3 data-no="Sikkerhet" data-en="Security">Sikkerhet</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{BP_SECURITY_ROWS}} --></tbody>
      </table>

      <h3 data-no="SEO-grunnlag" data-en="SEO Fundamentals">SEO-grunnlag</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{BP_SEO_ROWS}} --></tbody>
      </table>

      <h3 data-no="Kodekvalitet" data-en="Code Quality">Kodekvalitet</h3>
      <table class="findings-table">
        <thead><tr><th data-no="Sjekk" data-en="Check">Sjekk</th><th>Status</th><th data-no="Notater" data-en="Notes">Notater</th></tr></thead>
        <tbody><!-- {{BP_CODE_ROWS}} --></tbody>
      </table>
    </section>

    <!-- ===== PRIORITY FIXES ===== -->
    <section id="priority-fixes">
      <h2 data-no="Prioriterte tiltak" data-en="Priority Fixes">Prioriterte tiltak</h2>
      <p data-no="Følgende problemer har størst påvirkning og bør utbedres først." data-en="The following issues have the highest impact and should be addressed first.">Følgende problemer har størst påvirkning og bør utbedres først.</p>
      <ol class="priority-list">
        <!-- {{PRIORITY_FIXES_ITEMS}} -->
      </ol>
    </section>

    <!-- ===== CUSTOMER SUMMARY ===== -->
    <section id="customer-summary">
      <h2 data-no="Oppsummering" data-en="Summary">Oppsummering</h2>
      <div style="background: var(--color-gray-100); border-radius: 12px; padding: 1.75rem; border-left: 5px solid var(--color-lime); margin-top: 1rem; font-size: 1rem; line-height: 1.75;">
        <!-- {{CUSTOMER_SUMMARY}}
          Generate a 3 paragraph plain-language summary here suitable for sharing with a client.
          It should cover:
          1. Overall impression and scores across the four domains (Generelt inntrykk)
          2. The most critical issues found and their impact on users (Viktigste utfordringer)
          3. Positive aspects worth highlighting (Positive aspekter)
          Write in an accessible, professional tone — avoid technical jargon.
          Include both data-no and data-en attributes on wrapper elements for bilingual support.
        -->
      </div>
    </section>

  </div>

  <!-- ===== FOOTER ===== -->
  <div class="report-footer">
    <div class="footer-text">
      <a href="https://trebergen.no" target="_blank" rel="noopener noreferrer">trebergen.no</a>
    </div>
    <div>
      <img class="footer-logo-img" src="TRE_LOGO_URL" alt="TRE Bergen">
    </div>
  </div>

  <!-- ===== JAVASCRIPT ===== -->
  <script>
    // === Format URL (remove http/https/www) ===
    function formatURL() {
      const urlElement = document.querySelector('.audit-url');
      if (urlElement) {
        const href = urlElement.getAttribute('href');
        let displayUrl = href
          .replace(/^https?:\/\//, '')  // Remove http:// or https://
          .replace(/^www\./, '');       // Remove www.
        urlElement.textContent = displayUrl;
      }
    }

    // Run on page load
    document.addEventListener('DOMContentLoaded', formatURL);

    // === Language Toggle ===
    let currentLang = 'no';

    function switchLang(lang) {
      currentLang = lang;
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      document.documentElement.lang = lang;
      // Use innerHTML to preserve child elements (expand icons, badges, etc.)
      // Process deepest children first to avoid parent overwriting children
      const elements = Array.from(document.querySelectorAll('[data-no][data-en]'));
      // Sort by depth (deepest first) so children are updated before parents
      elements.sort((a, b) => {
        const depthA = getDepth(a);
        const depthB = getDepth(b);
        return depthB - depthA;
      });
      elements.forEach(el => {
        // Only update leaf text nodes — skip elements whose children also have data-no/data-en
        const hasTranslatableChildren = el.querySelector('[data-no][data-en]');
        if (!hasTranslatableChildren) {
          el.innerHTML = el.getAttribute('data-' + lang);
        }
      });
    }

    function getDepth(el) {
      let depth = 0;
      let node = el;
      while (node.parentElement) { depth++; node = node.parentElement; }
      return depth;
    }

    // === Expandable Finding Rows ===
    function toggleDetail(row) {
      const detail = row.nextElementSibling;
      if (detail && detail.classList.contains('finding-detail')) {
        row.classList.toggle('expanded');
        detail.classList.toggle('visible');
      }
    }

    // === Device Toggle (Desktop / Mobile) ===
    function switchDevice(device) {
      document.querySelectorAll('.device-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.device === device);
      });
      document.querySelectorAll('.device-section').forEach(sec => {
        sec.classList.remove('active');
      });
      document.getElementById('device-' + device).classList.add('active');
      // Re-apply gauge colors for newly visible section
      applyGaugeColors();
    }

    // === Speedometer gradient: red (0) → yellow (50) → green (100) ===
    function scoreToColor(score) {
      // 0 = red (#dc2626), 50 = yellow (#eab308), 100 = green (#16a34a)
      let r, g, b;
      if (score <= 50) {
        const t = score / 50;
        r = Math.round(220 + (234 - 220) * t);
        g = Math.round(38 + (179 - 38) * t);
        b = Math.round(38 + (8 - 38) * t);
      } else {
        const t = (score - 50) / 50;
        r = Math.round(234 + (22 - 234) * t);
        g = Math.round(179 + (163 - 179) * t);
        b = Math.round(8 + (74 - 8) * t);
      }
      return 'rgb(' + r + ',' + g + ',' + b + ')';
    }

    // Apply gradient colors to all speedometer gauges
    function applyGaugeColors() {
      document.querySelectorAll('.gauge-card').forEach(card => {
        const valueEl = card.querySelector('.gauge-value');
        const fillEl = card.querySelector('.gauge-fill');
        if (valueEl && fillEl) {
          const score = parseInt(valueEl.textContent, 10);
          if (!isNaN(score)) {
            fillEl.style.stroke = scoreToColor(score);
          }
        }
      });
    }
    applyGaugeColors();

    // === Clickable count badges: scroll to section and expand matching rows ===
    document.querySelectorAll('.filter-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const filterStatus = this.dataset.filter;
        const section = document.getElementById(targetId);

        if (section) {
          section.scrollIntoView({ behavior: 'smooth', block: 'start' });

          setTimeout(() => {
            // Collapse all details in the section first
            section.querySelectorAll('.finding-detail.visible').forEach(d => {
              d.classList.remove('visible');
              if (d.previousElementSibling) d.previousElementSibling.classList.remove('expanded');
            });

            // Expand rows matching the filter status
            section.querySelectorAll('.finding-row').forEach(row => {
              const statusEl = row.querySelector('.status');
              if (statusEl && statusEl.classList.contains(filterStatus)) {
                row.classList.add('expanded');
                const detail = row.nextElementSibling;
                if (detail && detail.classList.contains('finding-detail')) {
                  detail.classList.add('visible');
                }
                row.style.background = 'var(--color-lime-light)';
                setTimeout(() => { row.style.background = ''; }, 1500);
              }
            });
          }, 500);
        }
      });
    });
  </script>

</body>
</html>
