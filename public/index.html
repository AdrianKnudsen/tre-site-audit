<!doctype html>
<html lang="no">
  <head>
    <!-- Metadata and basic settings -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nettstedsrevisjon — TRE Bergen</title>
    <link rel="icon" type="image/svg+xml" href="/images/favicon.svg" />

    <!-- Fonts: Brockmann -->
    <link rel="stylesheet" href="./fonts/stylesheet.css" />

    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body>
    <!-- =================================================================
         LANDING PAGE
         The main page where the user enters the URL and API key
         ================================================================= -->
    <div class="landing" id="landing">
      <!-- Logo header at top-left -->
      <div class="landing-header">
        <div class="logo-tre">
          <span class="tre-t">T</span>
          <span class="tre-r">R</span>
          <span class="tre-e-bottom">E</span>
        </div>
      </div>

      <!-- Main content centered -->
      <div class="landing-content">
        <h1>Nettstedsrevisjon</h1>
        <p class="subtitle">
          Få en komplett analyse av UX, UI, tilgjengelighet, ytelse og beste
          praksis — drevet av AI.
        </p>

        <!-- Submission form -->
        <div class="form-card">
          <form id="auditForm" onsubmit="startAudit(event)">
            <!-- URL input -->
            <div class="form-group">
              <label for="urlInput">Nettadresse</label>
              <input
                type="text"
                id="urlInput"
                placeholder="https://example.com"
                required
                autocomplete="url"
              />
            </div>

            <!-- API key input -->
            <div class="form-group">
              <label for="apiKeyInput">Anthropic API-nøkkel</label>
              <input
                type="password"
                id="apiKeyInput"
                placeholder="sk-ant-..."
                required
              />
              <div class="hint">
                Nøkkelen sendes kun til Anthropic for AI-evaluering. Den lagres
                ikke.
              </div>
            </div>

            <!-- Submit button -->
            <button type="submit" class="btn-audit" id="submitBtn">
              Start revisjon
            </button>
          </form>

          <!-- Error banner (hidden by default) -->
          <div class="error-banner" id="errorBanner"></div>
        </div>
      </div>
    </div>

    <!-- =================================================================
         LOADING VIEW
         Shown while the audit is running with progress indicators
         ================================================================= -->
    <div class="loading-view hidden" id="loading">
      <!-- Logo header at top-left -->
      <div class="landing-header">
        <div class="logo-tre">
          <span class="tre-t">T</span>
          <span class="tre-r">R</span>
          <span class="tre-e-bottom">E</span>
        </div>
      </div>

      <!-- Loading content centered -->
      <div class="loading-content">
        <div class="loading-card">
          <h2>Revisjon pågår...</h2>

          <!-- Progress bar -->
          <div class="progress-bar-track">
            <div class="progress-bar-fill" id="progressBar"></div>
          </div>

          <!-- ETA Display -->
          <div class="eta-display" id="etaDisplay">
            <span id="etaText">Estimert tid: ~93 sekunder</span>
          </div>

          <!-- Step-by-step indicator -->
          <div class="progress-steps">
            <!-- Step 1: PageSpeed Insights -->
            <div class="progress-step" id="step1">
              <div class="step-icon">1</div>
              <span>Henter PageSpeed Insights-data...</span>
            </div>

            <!-- Step 2: HTML fetch -->
            <div class="progress-step" id="step2">
              <div class="step-icon">2</div>
              <span>Henter sidens HTML...</span>
            </div>

            <!-- Step 3: AI analysis -->
            <div class="progress-step" id="step3">
              <div class="step-icon">3</div>
              <span id="step3Text">AI analyserer 87 kriterier...</span>
            </div>

            <!-- Step 4: Report generation -->
            <div class="progress-step" id="step4">
              <div class="step-icon">4</div>
              <span>Genererer rapport...</span>
            </div>
          </div>
        </div>

        <!-- Fun Facts Section -->
        <div class="fun-facts-section" id="funFactsSection">
          <div class="fun-facts-card">
            <p class="fun-fact-text" id="funFactText"></p>
          </div>
        </div>
      </div>
    </div>

    <!-- =================================================================
         REPORT VIEW
         Displays the generated audit report
         ================================================================= -->
    <div class="report-view hidden" id="reportView">
      <!-- Action buttons above the report -->
      <div class="report-actions">
        <!-- Back button -->
        <button class="btn" onclick="goBack()">← Ny revisjon</button>

        <!-- Export buttons -->
        <div>
          <button class="btn" onclick="printReport()">Skriv ut</button>
          <button class="btn btn-primary" onclick="downloadReport()">
            Last ned HTML
          </button>
        </div>
      </div>

      <!-- Iframe displaying the report -->
      <iframe
        class="report-frame"
        id="reportFrame"
        sandbox="allow-scripts allow-same-origin"
      ></iframe>
    </div>

    <!-- =================================================================
         FOOTER
         Footer with logo and website address
         ================================================================= -->
    <div class="site-footer" id="siteFooter">
      <div class="footer-text">
        <a href="https://trebergen.no" target="_blank" rel="noopener noreferrer"
          >trebergen.no</a
        >
      </div>
      <div>
        <img
          class="footer-logo-img"
          src="./images/TreLogo.svg"
          alt="TRE Bergen"
        />
      </div>
    </div>

    <!-- Main script for application functionality -->
    <script src="./js/main.js"></script>
  </body>
</html>
